apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.sandbox.name | default "mcp-log-analysis-sandbox" }}-tools
  namespace: {{ .Values.sandbox.namespace | default "mcp-log-analysis" }}
  labels:
    app: {{ .Values.sandbox.name | default "mcp-log-analysis-sandbox" }}
data:
  # These files are synced from the tools/log-analysis/ directory in Git
  # Argo CD automatically updates this ConfigMap when tools are changed
  #
  # The .Files.Get function reads files from the pattern repository
  # and includes them in the ConfigMap

  log_store.py: |
{{- .Files.Get "tools/log-analysis/log_store.py" | nindent 4 }}

  privacy.py: |
{{- .Files.Get "tools/log-analysis/privacy.py" | nindent 4 }}

  execute_code.py: |
{{- .Files.Get "tools/log-analysis/execute_code.py" | nindent 4 }}

  workspace.py: |
{{- .Files.Get "tools/log-analysis/workspace.py" | nindent 4 }}

  skills.py: |
{{- .Files.Get "tools/log-analysis/skills.py" | nindent 4 }}
